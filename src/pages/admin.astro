---
import { getSession } from "auth-astro/server";

import Layout from "@/layouts/default.astro";
import BlankLayout from "@/layouts/blank.astro";
import AdminLogin from "@/components/pages/admin/AdminLogin";
import Dashboard from "@/components/pages/admin/Dashboard";

export const prerender = false;

const session = await getSession(Astro.request);
---

<>
  {
    session ? (
      <Layout>
        <Dashboard client:load />
      </Layout>
    ) : (
      <BlankLayout>
        <AdminLogin client:load />
      </BlankLayout>
    )
  }
</>
